{% extends "base.html" %}

{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'postapp/index_style.css' %}">
{% endblock %}

{% block content %}
<main class="page-content">
  {% if tag_filter %}
  <h1>
    {% if request.resolver_match.namespace == "archive" %}
    Archive Posts tagged with "{{ tag_filter.name }}"
    {% else %}
    Blog Posts tagged with "{{ tag_filter.name }}"
    {% endif %}
  </h1>
  {% else %}
  <h1>
    {% if request.resolver_match.namespace == "archive" %}
    Archive Posts
    {% else %}
    Blog Posts
    {% endif %}
  </h1>
  {% endif %}

  {% if post_list %}
  {% for post in post_list %}
  <article>
    <h2 class="article-header">
      <a href="{% url request.resolver_match.namespace|add:':post_detail' post.slug %}">
        {{ post.title }}
      </a>
    </h2>
    <a href="{% url request.resolver_match.namespace|add:':post_detail' post.slug %}" class="post-para-href">
      <p class="post-content">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ullamcorper, purus quis imperdiet sollicitudin, orci purus sagittis metus, vitae auctor mauris arcu in massa. Integer et venenatis dui. Nam in hendrerit ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam non congue nisi, ac malesuada turpis. Etiam et ex fermentum, congue nibh vel, porta justo. Integer at tortor eu lacus laoreet blandit at at nisi. Quisque dignissim vitae tellus et iaculis. Pellentesque iaculis sit amet ex eu varius. Sed egestas et odio et dignissim. Vestibulum vestibulum fermentum sapien et lacinia. Donec eget justo consectetur, aliquet leo id, sodales elit.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ullamcorper, purus quis imperdiet sollicitudin, orci purus sagittis metus, vitae auctor mauris arcu in massa. Integer et venenatis dui. Nam in hendrerit ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam non congue nisi, ac malesuada turpis. Etiam et ex fermentum, congue nibh vel, porta justo. Integer at tortor eu lacus laoreet blandit at at nisi. Quisque dignissim vitae tellus et iaculis. Pellentesque iaculis sit amet ex eu varius. Sed egestas et odio et dignissim. Vestibulum vestibulum fermentum sapien et lacinia. Donec eget justo consectetur, aliquet leo id, sodales elit.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ullamcorper, purus quis imperdiet sollicitudin, orci purus sagittis metus, vitae auctor mauris arcu in massa. Integer et venenatis dui. Nam in hendrerit ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam non congue nisi, ac malesuada turpis. Etiam et ex fermentum, congue nibh vel, porta justo. Integer at tortor eu lacus laoreet blandit at at nisi. Quisque dignissim vitae tellus et iaculis. Pellentesque iaculis sit amet ex eu varius. Sed egestas et odio et dignissim. Vestibulum vestibulum fermentum sapien et lacinia. Donec eget justo consectetur, aliquet leo id, sodales elit.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ullamcorper, purus quis imperdiet sollicitudin, orci purus sagittis metus, vitae auctor mauris arcu in massa. Integer et venenatis dui. Nam in hendrerit ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam non congue nisi, ac malesuada turpis. Etiam et ex fermentum, congue nibh vel, porta justo. Integer at tortor eu lacus laoreet blandit at at nisi. Quisque dignissim vitae tellus et iaculis. Pellentesque iaculis sit amet ex eu varius. Sed egestas et odio et dignissim. Vestibulum vestibulum fermentum sapien et lacinia. Donec eget justo consectetur, aliquet leo id, sodales elit.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ullamcorper, purus quis imperdiet sollicitudin, orci purus sagittis metus, vitae auctor mauris arcu in massa. Integer et venenatis dui. Nam in hendrerit ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam non congue nisi, ac malesuada turpis. Etiam et ex fermentum, congue nibh vel, porta justo. Integer at tortor eu lacus laoreet blandit at at nisi. Quisque dignissim vitae tellus et iaculis. Pellentesque iaculis sit amet ex eu varius. Sed egestas et odio et dignissim. Vestibulum vestibulum fermentum sapien et lacinia. Donec eget justo consectetur, aliquet leo id, sodales elit.
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ullamcorper, purus quis imperdiet sollicitudin, orci purus sagittis metus, vitae auctor mauris arcu in massa. Integer et venenatis dui. Nam in hendrerit ipsum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aliquam non congue nisi, ac malesuada turpis. Etiam et ex fermentum, congue nibh vel, porta justo. Integer at tortor eu lacus laoreet blandit at at nisi. Quisque dignissim vitae tellus et iaculis. Pellentesque iaculis sit amet ex eu varius. Sed egestas et odio et dignissim. Vestibulum vestibulum fermentum sapien et lacinia. Donec eget justo consectetur, aliquet leo id, sodales elit.
      </p>
    </a>
    <ul class="tag-list">
      {% for tag in post.tags.all %}
      <li>
        <a href="{% url request.resolver_match.namespace|add:':post_tag' tag.name %}">
          {{ tag.name }}
        </a>
      </li>
      {% endfor %}
    </ul>

  </article>
  {% endfor %}
  {% else %}
  <h2>No posts yet!</h2>
  {% endif %}
</main>
<button id="scroll-to-top-btn" title="Go to top">â†‘</button>

<aside>
  {% if suggested_posts %}
  <h3>Suggested Reads</h3>
  <ul id="sidebar-suggest-list" class="sidebar-box">
    {% for p in suggested_posts %}
    <li>
      <h4>
        <a href="{% url request.resolver_match.namespace|add:':post_detail' p.slug %}" class="aside-post-link">
          {{ p.title }}
        </a>
      </h4>
    </li>
    {% endfor %}
  </ul>
  {% endif %}

  {% if post_timeline %}
  <h3>Post Timeline</h3>
  {% now "Y" as current_year %}
  {% now "F" as current_month %}
  {% for year, months in post_timeline.items %}
  {% if year == current_year %}
  <details open>
  {% else %}
  <details>
  {% endif %}
  <summary>{{ year }}</summary>
  <ul>
    {% for month, posts in months.items %}
    <li>
      {% if year == current_year and month == current_month %}
      <details open>
      {% else %}
      <details>
      {% endif %}
      <summary>{{ month }}</summary>
      <ul>
        {% for p in posts %}
        <li>
          <h4>
            <a href="{% url request.resolver_match.namespace|add:':post_detail' p.slug %}" class="aside-post-link">
              {{ p.title }}
            </a>
          </h4>
        </li>
        {% endfor %}
        </ul>
      </details>
    </li>
    {% endfor %}
    </ul>
    </details>
    {% endfor %}
    {% endif %}

  {% if tag_list %}
  <h3>Tag List</h3>
  <ul id="sidebar-tag-list" class="tag-list sidebar-box">
    {% for tag in tag_list %}
    <li>
      <a href="{% url request.resolver_match.namespace|add:':post_tag' tag.name %}">
        {{ tag.name }}
      </a>
    </li>
    {% endfor %}
  </ul>
  {% endif %}
</aside>
{% endblock %}
